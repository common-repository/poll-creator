(()=>{var e,t={746:(e,t,o)=>{"use strict";const l=window.wp.element,r=window.wp.blocks;var n=o(184),a=o.n(n);const i=window.wp.i18n,s=window.wp.components,c=window.wp.blockEditor,p=({index:e,option:t,onChange:o,onNewOption:r,onDelete:n,attributes:a})=>{const{optionType:s}=a;return(0,l.createElement)("div",{className:"option"},(0,l.createElement)("div",{className:"option-selector"},"multi-check"===s&&(0,l.createElement)("input",{type:"checkbox",name:"poll-option[]",className:"checkbox"}),"radio"===s&&(0,l.createElement)("input",{type:"radio",name:"poll-option",className:"radio"})),(0,l.createElement)(c.RichText,{tagName:"label",className:"option-label",placeholder:(0,i.__)("Enter option","poll-creator"),multiline:!1,preserveWhiteSpace:!1,onChange:t=>{o(e,t)},onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),r(e+1))},onRemove:()=>n(e),onReplace:void 0,value:t.option,allowedFormats:["core/bold","core/italic","core/link"],withoutInteractiveFormatting:!0,disableLineBreaks:!0}))};let u=(e=21)=>{let t="",o=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&o[e]];return t};const m=(e,t)=>{const o=e.querySelectorAll("[role=textbox]")[t];o&&(e=>{e.focus();const t=document.createRange();t.selectNodeContents(e),t.collapse(!1);const o=window.getSelection();o.removeAllRanges(),o.addRange(t)})(o)},d=({attributes:e,setAttributes:t})=>{const o=(0,l.useRef)(),{options:r}=e;(0,l.useEffect)((()=>{0===r.length&&t({options:[{option_id:u(),type:"text",option:""}]})}),[]);const n=(e,o)=>{t({options:r.map(((t,l)=>(e===l&&(t.option=o),t)))}),e===r.length-1&&t({options:[...r,{option_id:u(),type:"text",option:""}]})},a=e=>{e<=r.length&&(t({options:[...r.slice(0,e),{option_id:u(),type:"text",option:""},...r.slice(e,r.length)]}),m(o.current,Math.min(e,r.length)))},i=e=>{m(o.current,Math.max(e-1,0)),r.length>1&&t({options:r.filter(((t,o)=>o!==e))})};return(0,l.createElement)("div",{className:"poll-options-wrapper",ref:o},r.length&&r.map(((t,r)=>(0,l.createElement)(p,{attributes:e,key:r,parentRef:o,index:r,option:t,onChange:n,onNewOption:a,onDelete:i}))))},g=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"pollify/poll","version":"1.0.0","title":"Poll","category":"pollify","description":"Poll block for creating poll with posts","supports":{"align":["center","full","wide"],"alignWide":true,"html":false,"class":true,"color":{"background":true,"text":true,"border":true},"spacing":{"margin":true,"padding":true,"width":true},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":true,"radius":true,"style":true,"width":true}}},"attributes":{"pollId":{"type":"integer","default":0},"pollClientId":{"type":"string","default":""},"title":{"type":"string","default":""},"description":{"type":"string","default":""},"options":{"type":"array","default":[]},"optionType":{"type":"string","default":"radio"},"status":{"type":"string","default":"publish"},"endDate":{"type":"string","default":null},"closePollState":{"type":"string","default":"show-result"},"closePollmessage":{"type":"string","default":"This poll is closed."},"submitButtonLabel":{"type":"string","default":"Vote"},"submitButtonBgColor":{"type":"string","default":"#3858e9"},"submitButtonTextColor":{"type":"string","default":"#ffffff"},"submitButtonHoverBgColor":{"type":"string","default":"#000000"},"submitButtonHoverTextColor":{"type":"string","default":"#ffffff"},"submitButtonWidth":{"type":"number","default":25},"submitButtonAlign":{"type":"string","default":"left"},"closingBannerBgColor":{"type":"string","default":"#f8dad8"},"closingBannerTextColor":{"type":"string","default":"#d82e20"},"confirmationMessageType":{"type":"string","default":"view-message"},"confirmationMessage":{"type":"string","default":"Thank you for voting!"},"allowedPerComputerResponse":{"type":"boolean","default":false},"style":{"type":"object","default":{"color":{"background":"#ffffff","text":"#222222","border":"#e6e6e6"},"spacing":{"padding":{"top":"30px","right":"30px","bottom":"30px","left":"30px"}},"border":{"color":"#fafafa","style":"solid","width":"3px"}}}},"textdomain":"pollify","editorScript":"file:./index.js","style":"file:./style-index.css","viewScript":"file:./view.js"}');(0,r.registerBlockType)(g,{icon:{foreground:"#FF4187",src:(0,l.createElement)("svg",{viewBox:"-32 0 512 512",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M448 432V80c0-26.5-21.5-48-48-48H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48zM112 192c-8.84 0-16-7.16-16-16v-32c0-8.84 7.16-16 16-16h128c8.84 0 16 7.16 16 16v32c0 8.84-7.16 16-16 16H112zm0 96c-8.84 0-16-7.16-16-16v-32c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16v32c0 8.84-7.16 16-16 16H112zm0 96c-8.84 0-16-7.16-16-16v-32c0-8.84 7.16-16 16-16h64c8.84 0 16 7.16 16 16v32c0 8.84-7.16 16-16 16h-64z"}))},edit:e=>{const{clientId:t,attributes:o,setAttributes:r}=e,{pollClientId:n,title:p,description:u,optionType:m,status:g,endDate:b,closePollState:f,closePollmessage:h,submitButtonLabel:v,submitButtonBgColor:y,submitButtonTextColor:_,submitButtonHoverBgColor:w,submitButtonHoverTextColor:C,closingBannerBgColor:B,closingBannerTextColor:x,submitButtonWidth:k,submitButtonAlign:E,confirmationMessageType:T,confirmationMessage:S,allowedPerComputerResponse:N}=o;(0,l.useEffect)((()=>{n||r({pollClientId:t})}),[]);const O={"--pollify-submit-button-bg-color":y,"--pollify-submit-button-text-color":_,"--pollify-submit-button-hover-bg-color":w,"--pollify-submit-button-hover-text-color":C,"--pollify-closing-banner-bg-color":B,"--pollify-closing-banner-text-color":x},P=((e,t,o=new Date)=>"draft"===e||"schedule"===e&&new Date(t)<o)(g,b),R=(0,c.useBlockProps)({className:"wp-block-pollify-editor-wrapper",style:O});return(0,l.createElement)("div",{...R},(0,l.createElement)(c.InspectorControls,{group:"settings"},(0,l.createElement)(s.PanelBody,{title:(0,i.__)("General settings","poll-creator"),className:"pollify-general-settings-sidebar-wrap"},(0,l.createElement)(s.SelectControl,{label:(0,i.__)("Status","poll-creator"),value:g,options:[{label:(0,i.__)("Open","poll-creator"),value:"publish"},{label:(0,i.__)("Close","poll-creator"),value:"draft"},{label:(0,i.__)("Close after","poll-creator"),value:"schedule"}],onChange:e=>{r({endDate:"schedule"===e?new Date((new Date).getTime()+864e5).toISOString():null,status:e})}}),("draft"===g||"schedule"===g)&&(0,l.createElement)(l.Fragment,null,"schedule"===g&&(0,l.createElement)(s.TimePicker,{currentTime:b,onChange:e=>{const t=new Date(e);r({endDate:t.toISOString()})},is12Hour:!0}),(0,l.createElement)(s.SelectControl,{label:(0,i.__)("When poll is closed","poll-creator"),value:f,options:[{label:(0,i.__)("Show poll result","poll-creator"),value:"show-result"},{label:(0,i.__)("Hide poll","poll-creator"),value:"hide-poll"},{label:(0,i.__)("Show poll close message","poll-creator"),value:"show-message"}],onChange:e=>r({closePollState:e})})),"show-message"===f&&(0,l.createElement)(s.TextareaControl,{value:h||(0,i.__)("This poll is closed","poll-creator"),label:(0,i.__)("Close message text","poll-creator"),placeholder:(0,i.__)("This poll is closed","poll-creator"),onChange:e=>r({closePollmessage:e})})),(0,l.createElement)(s.PanelBody,{title:(0,i.__)("Confiramtion message","poll-creator"),className:"pollify-confirmation-settings-sidebar-wrap"},(0,l.createElement)(s.SelectControl,{label:(0,i.__)("On submission","poll-creator"),value:T,options:[{label:(0,i.__)("View results","poll-creator"),value:"view-result"},{label:(0,i.__)("View message","poll-creator"),value:"view-message"}],onChange:e=>r({confirmationMessageType:e})}),"view-message"===T&&(0,l.createElement)(s.TextareaControl,{value:S||(0,i.__)("Thanks for voting!","poll-creator"),label:(0,i.__)("Message text","crowdsignal-forms"),placeholder:(0,i.__)("Thanks for voting!","poll-creator"),onChange:e=>r({confirmationMessage:e})})),(0,l.createElement)(s.PanelBody,{title:(0,i.__)("Response settings","poll-creator"),className:"pollify-response-settings-sidebar-wrap"},(0,l.createElement)(s.CheckboxControl,{label:(0,i.__)("Allowed one response per computer","poll-creator"),help:(0,i.__)("If checked, only one response per computer will be allowed.","poll-creator"),checked:N,onChange:e=>r({allowedPerComputerResponse:e})}))),(0,l.createElement)(c.InspectorControls,{group:"styles"},(0,l.createElement)(c.PanelColorSettings,{title:(0,i.__)("Submit button colors","poll-creator"),initialOpen:!1,colorSettings:[{value:y,onChange:e=>r({submitButtonBgColor:e}),label:(0,i.__)("Background Color","poll-creator")},{value:_,onChange:e=>r({submitButtonTextColor:e}),label:(0,i.__)("Text Color","poll-creator")},{value:w,onChange:e=>r({submitButtonHoverBgColor:e}),label:(0,i.__)("Hover Background Color","poll-creator")},{value:C,onChange:e=>r({submitButtonHoverTextColor:e}),label:(0,i.__)("Hover Text Color","poll-creator")}]},(0,l.createElement)(s.ButtonGroup,{"aria-label":(0,i.__)("Button width")},(0,l.createElement)("h2",null,(0,i.__)("Button width","poll-creator")),[25,50,75,100].map((e=>(0,l.createElement)(s.Button,{key:e,size:"small",variant:e===k?"primary":void 0,onClick:()=>{r({submitButtonWidth:k===e?void 0:e})}},e,"%"))),k&&100!==k&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("h2",null,(0,i.__)("Button alignment","poll-creator")),["left","center","right"].map((e=>(0,l.createElement)(s.Button,{key:e,size:"medium",variant:e===E?"primary":void 0,onClick:()=>{r({submitButtonAlign:e})}},e)))))),(0,l.createElement)(c.PanelColorSettings,{title:(0,i.__)("Poll closing banner","poll-creator"),initialOpen:!1,colorSettings:[{value:B,onChange:e=>r({closingBannerBgColor:e}),label:(0,i.__)("Background Color","poll-creator")},{value:x,onChange:e=>r({closingBannerTextColor:e}),label:(0,i.__)("Text Color","poll-creator")}]})),(0,l.createElement)(c.BlockControls,null,(0,l.createElement)(s.ToolbarGroup,null,(0,l.createElement)(s.ToolbarButton,{icon:"yes",label:"Multi check",onClick:()=>r({optionType:"multi-check"}),isActive:"multi-check"===m}),(0,l.createElement)(s.ToolbarButton,{icon:"marker",label:"Radio button",onClick:()=>r({optionType:"radio"}),isActive:"radio"===m}))),(0,l.createElement)("div",{className:"pollify-poll-form"},(0,l.createElement)(c.RichText,{tagName:"h4",value:p,onChange:e=>r({title:e}),placeholder:(0,i.__)("Enter the poll question","poll-creator"),allowedFormats:["core/bold","core/link","core/italic"],className:"poll-title"}),(0,l.createElement)(c.RichText,{tagName:"p",value:u,onChange:e=>r({description:e}),placeholder:(0,i.__)("Add a description (optional)","poll-creator"),allowedFormats:["core/bold","core/link","core/italic"],className:"poll-description"}),(0,l.createElement)(d,{attributes:o,setAttributes:r}),P&&(0,l.createElement)("div",{className:"closing-banner"},(0,l.createElement)("p",null,h)),!P&&(0,l.createElement)("div",{className:a()("wp-block-button poll-block-button",{[`align-${E}`]:E})},(0,l.createElement)("div",{className:a()("submit-button-wrapper",{[`has-custom-width wp-block-button-width-${k}`]:k})},(0,l.createElement)(c.RichText,{className:"wp-block-button__link submit-button",onChange:e=>r({submitButtonLabel:e}),value:v,allowedFormats:[],multiline:!1,disableLineBreaks:!0})))))},save:()=>null})},184:(e,t)=>{var o;!function(){"use strict";var l={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var n=typeof o;if("string"===n||"number"===n)e.push(o);else if(Array.isArray(o)){if(o.length){var a=r.apply(null,o);a&&e.push(a)}}else if("object"===n){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var i in o)l.call(o,i)&&o[i]&&e.push(i)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}()}},o={};function l(e){var r=o[e];if(void 0!==r)return r.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,l),n.exports}l.m=t,e=[],l.O=(t,o,r,n)=>{if(!o){var a=1/0;for(p=0;p<e.length;p++){o=e[p][0],r=e[p][1],n=e[p][2];for(var i=!0,s=0;s<o.length;s++)(!1&n||a>=n)&&Object.keys(l.O).every((e=>l.O[e](o[s])))?o.splice(s--,1):(i=!1,n<a&&(a=n));if(i){e.splice(p--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[o,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={177:0,454:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,a=o[0],i=o[1],s=o[2],c=0;if(a.some((t=>0!==e[t]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(s)var p=s(l)}for(t&&t(o);c<a.length;c++)n=a[c],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(p)},o=self.webpackChunkpoll_creator=self.webpackChunkpoll_creator||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=l.O(void 0,[454],(()=>l(746)));r=l.O(r)})();